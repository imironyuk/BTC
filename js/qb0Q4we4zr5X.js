function set_cookie(e,o){o=escape(o),cookieExp=new Date,cookieExp.setMonth(cookieExp.getMonth()+36),delete_cookie(e),document.cookie=e+"="+o+"; expires="+cookieExp.toGMTString()+"; path=/;"}function get_cookie(e){var o=document.cookie.match("(^|;) ?"+e+"=([^;]*)(;|$)");return o?unescape(o[2]):null}function delete_cookie(e){var o=new Date;o.setTime(o.getTime()-1),document.cookie=e+="=; expires="+o.toGMTString()}jQuery(document).ready((function(){jQuery("#subscribe_email").keyup((function(){jQuery(this).hasClass("not-valid")&&jQuery(this).removeClass("not-valid")})),jQuery("#subscribe-popover-allow-button").click((function(){s_email=jQuery("#subscribe_email"),pattern=/^([a-z0-9_\.-])+@[a-z0-9-]+\.([a-z]{2,4}\.)?[a-z]{2,4}$/i,""!=s_email.val()&&0==s_email.val().search(pattern)?jQuery.ajax({url:"/wp-content/plugins/subscribe-widget/add_subscribe_email.php",type:"POST",dataType:"json",data:{email:s_email.val()},success:function(e){"added"==e&&(jQuery("#subscribe-popover-container .popover-body-message").addClass("added").text("Вы успешно подписаны на нашу рассылку!"),jQuery(".popover-footer, #subscribe_email").hide(),set_cookie("subscribe_email","1"),s_email.val(""),setTimeout((function(){jQuery("#subscribe-popover-container").hide()}),2e3)),"exist"==e&&jQuery("#subscribe-popover-container .popover-body-message").addClass("exist").text("Вы уже подписаны на нашу рассылку!")},error:function(e){}}):s_email.addClass("not-valid"),"false"!=window.localStorage.getItem("sentFirebaseMessagingToken")&&jQuery("#onesignal-popover-container").show()})),jQuery("#subscribe-popover-cancel-button").click((function(){jQuery("#subscribe-popover-container").hide(),set_cookie("subscribe_email","1"),"false"!=window.localStorage.getItem("sentFirebaseMessagingToken")&&jQuery("#onesignal-popover-container").show()}))}));